import os, json
from flask import Flask, request, jsonify
from dotenv import load_dotenv
from db.models import init_db, SessionLocal, Lead, Transcript
from adapters.nlp_openai import generate_reply # or swap
from adapters.nlp_dialogflow import detect_intent_texts # optional
from adapters.nlp_rasa import rasa_reply # optional
from adapters.channel_facebook import send_fb_message
from adapters.channel_whatsapp_meta import send_wa_text
from adapters.channel_telegram import send_telegram


load_dotenv()
app = Flask(__name__)
init_db()


META_VERIFY_TOKEN = os.getenv('META_VERIFY_TOKEN')


############################################
# Helpers
###################################
