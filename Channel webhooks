A) Facebook Messenger & Instagram (Meta)

Setup

Create a Meta App → Add Messenger product → Connect your Facebook Page.

For Instagram, enable Instagram Messaging in the same app and connect IG Business account.

Set Webhook: https://your-domain.com/webhook/meta and add subscriptions messages, messaging_postbacks.

Verify token = META_VERIFY_TOKEN.

Code (adapters/channel_facebook.py)
import os, requests
META_TOKEN = os.getenv('META_PAGE_ACCESS_TOKEN')


API_URL = "https://graph.facebook.com/v20.0/me/messages"


def send_fb_message(recipient_id, text):
data = {"recipient": {"id": recipient_id}, "message": {"text": text}}
requests.post(API_URL, params={"access_token": META_TOKEN}, json=data, timeout=15)

B) WhatsApp — Meta Cloud API

Setup

Get Cloud API access in Meta, obtain WA_PHONE_NUMBER_ID and WA_CLOUD_TOKEN.

Webhook → https://your-domain.com/webhook/whatsapp (verify token same flow).

Code (adapters/channel_whatsapp_meta.py)
import os, requests
TOKEN = os.getenv('WA_CLOUD_TOKEN')
PHONE_ID = os.getenv('WA_PHONE_NUMBER_ID')


def send_wa_text(to, text):
url = f"https://graph.facebook.com/v20.0/{PHONE_ID}/messages"
payload = {
"messaging_product": "whatsapp",
"to": to,
"type": "text",
"text": {"body": text}
}
headers = {"Authorization": f"Bearer {TOKEN}"}
requests.post(url, json=payload, headers=headers, timeout=15)

C) WhatsApp — Twilio (alternative)

Code (adapters/channel_whatsapp_twilio.py)
import os
from requests.auth import HTTPBasicAuth
import requests


SID = os.getenv('TWILIO_ACCOUNT_SID')
AUTH = os.getenv('TWILIO_AUTH_TOKEN')
FROM = os.getenv('TWILIO_WHATSAPP_NUMBER')


def send_twilio_wa(to, body):
url = f"https://api.twilio.com/2010-04-01/Accounts/{SID}/Messages.json"
data = {"From": FROM, "To": to, "Body": body}
requests.post(url, data=data, auth=HTTPBasicAuth(SID, AUTH), timeout=15)

D) Telegram

Setup

Talk to @BotFather → create bot → get token.

Set webhook: https://your-domain.com/webhook/telegram.

Code (adapters/channel_telegram.py)
import os, requests
TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')


def send_telegram(chat_id, text):
url = f"https://api.telegram.org/bot{TOKEN}/sendMessage"
requests.post(url, json={"chat_id": chat_id, "text": text}, timeout=15)

